<html>

    <head>
        <meta charset="utf-8">
        <title>PyLadies 11-01 – Slovníky</title>

        <link rel="stylesheet" href="../css/bootstrap.css">
        <link rel="stylesheet" href="../css/pyladies.css">
    </head>

    <body class="no-reveal">

        <div class="container">
            <div class="no-reveal header">
                <h3 class="text-muted" id="show-all">PyLadies Brno</h3>
            </div>
            <div class="row stuff">
                <section class="col-lg-12">
                    <h1>Slovníky</h1>
                    <div>
                        Další základní datový typ, který si představíme –
                        po číslech, řetězcích, seznamech a <em>n</em>-ticích –
                        jsou <em>slovníky</em> (angl. <em>dictionary</em>,
                        <code>dict</code>).
                    </div>
                    <div>
                        Jako seznamy, slovníky obsahují další hodnoty.
                        Na rozdíl od seznamů, ve kterých jsou všechny prvky
                        uspořádané do sekvence, ve slovnících máme dva druhy
                        prvků: takzvaný <em>klíč</em> (angl. <em>key</em>)
                        a <em>hodnotu</em> (angl. <em>value</em>).
                        Každému klíči je přiřazena nějaká hodnota.
                    </div>
                    <div>
                        Slovník můžeš použít, když máš několik kousků
                        informací, které se dají pojmenovat, ale chceš s nimi
                        pracovat jako s jednou proměnnou.
                    </div>
                    <div>
                        Tady je slovník, který má tři klíče, a k nim příslušné
                        tři hodnoty:
                    </div>
<pre>
ja = {'jméno': 'Anna', 'město': 'Brno', 'čísla': [3, 7]}
</pre>
                    <div class="note">
                        Když slovník vypíšeš, pravděpodobně zjistíš,
                        se klíče a hodnoty vypíšou v jiném pořadí.
                        Slovníky totiž, na rozdíl od seznamů, nemají dané
                        pořadí prvků – jen přiřazují hodnoty klíčům.
                    </div>
                    <div>
                        Hodnoty ze slovníku můžeš získat podobně jako
                        ze seznamu, jen místo indexu (pozice) použiješ klíč:
                    </div>
<pre>
>>> ja['jméno']
'Anna'
</pre>
                    <div>
                        Zeptáš-li se na neexistující klíč, nebude se to Pythonu
                        líbit:
                    </div>
<pre>
>>> ja['věk']
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
KeyError: 'věk'
</pre>
                    <div>
                        Hodnoty jdou podle klíče i měnit:
                    </div>
<pre>
>>> ja['čísla'] = [3, 7, 42]
>>> ja
{'čísla': [3, 7, 42], 'jméno': 'Anna', 'město': 'Brno'}
</pre>
                    <div>
                        ... nebo přidávat:
                    </div>
<pre>
>>> ja['jazyk'] = 'Python'
>>> ja
{'jazyk': 'Python', 'čísla': [3, 7, 42], 'jméno': 'Anna', 'město': 'Brno'}
</pre>
                    <div>
                        ... nebo ubírat
                        (příkazem <code>del</code>, podobně jako u seznamů):
                    </div>
<pre>
>>> del ja['čísla']
>>> ja
{'jazyk': 'Python', 'jméno': 'Anna', 'město': 'Brno'}
</pre>
                </section>
                <section class="col-lg-12">
                    <h2>Vyhledávací tabulka</h2>
                    <div>
                        Trochu jiné použití slovníku, než sdružování
                        „různých“ typů informací, je takzvaná
                        <em>vyhledávací tabulka</em>
                        (angl. <em>lookup table</em>).
                        V ní mají typicky všechny hodnoty stejný typ.
                        <!-- TODO: dopsat! -->
                    </div>
<pre>
barvy = {
    'hruška': 'zelená',
    'jablko': 'červená',
    'meloun': 'zelená',
    'švestka': 'modrá',
    'ředkvička': 'červená',
    'zelí': 'zelená',
    'mrkev': 'červená',
}
</pre>
                </section>
                <section class="col-lg-12">
                    <h2>Iterace</h2>
                    <div>
                        Když dáš slovník do cyklu <code>for</code>,
                        dostaneš klíče:
                    </div>
<pre>
>>> popisy_funkci = {'len': 'délka', 'str': 'řetězec', 'dict': 'slovník'}
>>> for klic in popisy_funkci:
...     print(klic)
str
dict
len
</pre>
                    <div>
                        Pokud chceš hodnoty, stačí použít metodu
                        <code>values</code>:
                    </div>
<pre>
>>> for hodnota in popisy_funkci.values():
...     print(hodnota)
řetězec
slovník
délka
</pre>
                    <div>
                        Většinou ale potřebuješ jak klíče tak hodnoty.
                        K tomu mají slovníky metodu <code>items</code>,
                        která vrátí „něco jako seznam” dvojic:
                    </div>
<pre>
>>> for klic, hodnota in popisy_funkci.items():
...     print('{}: {}'.format(klic, hodnota))
str: řetězec
dict: slovník
len: délka
</pre>
                    <div class="note">
                        Existuje i metoda <code>keys()</code>,
                        která vrací klíče.
                        To, co <code>keys()</code>, <code>values()</code>
                        a <code>items()</code> vrací, jsou speciální objekty,
                        které kromě použití ve <code>for</code> umožňuje další
                        operace: například pracovat s klíči jako s množinou.
                        V <a href="https://docs.python.org/3.0/library/stdtypes.html#dictionary-view-objects">dokumentaci</a> Pythonu
                        je to všechno popsáno.
                    </div>
                    <div>
                        V průběhu takového <code>for</code> cyklu nesmíš
                        do slovníku přidávat záznamy, ani záznamy odebírat:
                    </div>
<pre>
>>> for klic in popisy_funkci:
...     del popisy_funkci[klic]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
RuntimeError: dictionary changed size during iteration
</pre>
                    <div>
                        Hodnoty u už existujících klíčů ale měnit můžeš.
                    </div>
                </section>
                <section class="col-lg-12">
                    <h2>Jak udělat slovník</h2>
                    <div>
                        Slovník se dá vytvořit dvěma způsoby.
                        První, pomocí {složených závorek}, jsme už viděly;
                        další využívají funkci <code>dict</code>.
                        Ta, ve stylu <code>str</code>, <code>int</code>
                        či <code>list</code>, převede cokoli, co jde,
                        na slovník.
                    </div>
                    <div>
                        Slovník je ovšem dost specifická struktura –
                        čísla nebo typické seznamy na něj převádět nejdou.
                        Můžeme ale na slovník převést <em>jiný slovník</em>.
                        Nový slovník žije svým vlastním životem;
                        následné změny se promítnou jen do něj.
                    </div>
<pre>
barvy_po_tydnu = dict(barvy)
for klic in barvy_po_tydnu:
    barvy_po_tydnu[klic] = 'černo-hnědo-' + barvy_po_tydnu[klic]
print(barvy['jablko'])
print(barvy_po_tydnu['jablko'])
</pre>
                    <div>
                        Druhá věc, která jde převést na slovník, je
                        <em>sekvence dvojic</em> klíč/hodnota:
                    </div>
<pre>
data = [(1, 'jedna'), (2, 'dva'), (3, 'tři')]
nazvy_cisel = dict(data)
</pre>
                    <div>
                        A to je vše, co se na slovník dá převést.
                    </div>
                    <div>
                        Jako bonus umí funkce <code>dict</code> ještě
                        brát pojmenované argumenty.
                        Každé jméno argumentu převede na řetězec,
                        použije ho jako klíč, a přiřadí danou hodnotu:
                    </div>
<pre>
popisy_funkci = dict(len='délka', str='řetězec', dict='slovník')
print(popisy_funkci['len'])
</pre>
                    <div class="note">
                        Pozor na to, že v tomhle případě musí být klíče
                        pythoní „jména“ – musí být použitelné jako jména
                        proměnných.
                        Například takhle nejde zadat jako klíč řetězec
                        <code>"def"</code> nebo <code>"propan-butan"</code>.
                    </div>
                    <div class="note">
                        Pojmenované argumenty jde kombinovat s ostatními
                        způsoby vytvoření <code>dict</code>.
                    </div>
                </section>
                <section class="col-lg-12">
                    <h2>A to je zatím ke slovníkům vše</h2>
                    <div>
                        Chceš-li mít všechny triky, které  slovníky umí,
                        pěkně pohromadě, můžeš si stáhnout
                        <a href="https://github.com/pyvec/cheatsheets/raw/master/dicts/dicts-cs.pdf">Slovníkový tahák</a>.
                    </div>
                    <div class="note">
                        Kompletní popis slovníků najdeš
                        v <a href="https://docs.python.org/3.0/library/stdtypes.html#mapping-types-dict">dokumentaci</a> Pythonu.
                    </div>
                </section>
            </div>
            <div class="no-reveal footer">
                <div>pro PyLadies Brno napsal Petr Viktorin, 2015</div>
                <div>Části převzaty z tutoriálu <a href="http://tutorial.djangogirls.org/en/python_introduction/README.html">Django Girls</a></div>
                <div>Licence: <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a></div>
            </div>
        </div>

        <script src="../reveal.js/lib/js/head.min.js"></script>
        <script type="text/javascript" src="../js/solutions.js"></script>

    </body>
</html>
